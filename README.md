# üìÖ Telegram Bot –†–∞—Å–ø–∏—Å–∞–Ω–∏—è

–ë–æ—Ç –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–æ iCal, –≥–∏–±–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞—Å—Å—ã–ª–∫–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.

## üõ† –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ (BotFather)
1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram.
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`.
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `MyScheduleBot`) –∏ —é–∑–µ—Ä–Ω–µ–π–º (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `bot`).
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π **HTTP API Token**.

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ .env
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `.env.example`).
–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```ini
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç BotFather
BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11

# Optional: database location.
# You can pass either a SQLAlchemy URL (sqlite:/postgres:/...) or a filesystem path to a SQLite file.
# Default: sqlite+aiosqlite:///./data/bot.db
DB_PATH=sqlite+aiosqlite:///./data/bot.db

# ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ). –ú–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —á–µ—Ä–µ–∑ –±–æ—Ç–æ–≤ —Ç–∏–ø–∞ @userinfobot –∏–ª–∏ @raw_data_bot

# –ó–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞, —á—Ç–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è (–≤ 10:00 —É—Ç—Ä–∞)
COVERAGE_WARN_DAYS=7

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –¥–ª—è Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (—á—Ç–æ–±—ã –ª–æ–≥–∏ –∏ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è —Å–æ–≤–ø–∞–¥–∞–ª–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º)
# –í–∞–∂–Ω–æ: —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ, –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –±–æ—Ç —Å—á–∏—Ç–∞–µ—Ç "—Å–µ–π—á–∞—Å".
TZ=Europe/Moscow

# Minimum interval between iCal syncs (seconds). 0 = no limit.
ICAL_SYNC_MIN_INTERVAL_SECONDS=0
```

> –î–µ–ø–ª–æ–π –Ω–∞ Railway (Volume + –∞–≤—Ç–æ-–¥–µ–ø–ª–æ–π –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ SQLite –ø—Ä–∏ redeploy): —Å–º. [docs/railway.md](docs/railway.md).

### 3. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Docker –∏ Docker Compose.

–ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ:
```bash
docker compose up -d --build
```
–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
docker compose logs -f
```
–û—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
docker compose down
```

### 4. –í–∞–∂–Ω–æ: –≥–¥–µ –∂–∏–≤—ë—Ç –ë–î –∏ –∫–∞–∫ –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
–ë–æ—Ç —Ö—Ä–∞–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–æ–≤ –∏ –∫—ç—à —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ SQLite-—Ñ–∞–π–ª–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `./data/bot.db`, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ `DB_PATH`).
–í `docker-compose.yml` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **named volume** `rasp_bot_data`, —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ `/app/data` ‚Äî —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∂–∏–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞/–æ–±—Ä–∞–∑–∞.

–ß—Ç–æ –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å:
- `docker compose down -v` (–∏–ª–∏ `--volumes`) **—É–¥–∞–ª–∏—Ç** volume –∏ –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º –ë–î.
- –ï—Å–ª–∏ –≤—ã —Ä–∞–Ω—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ bind-mount `./data:/app/data`, —Ç–æ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ —á–µ—Ä–µ–∑ ‚Äú—É–¥–∞–ª–∏–ª –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí –∑–∞–Ω–æ–≤–æ —Å–∫–ª–æ–Ω–∏–ª —Ä–µ–ø–æ‚Äù –≤—ã —Ç–µ—Ä—è–ª–∏ `./data` –∏ –ø–æ–ª—É—á–∞–ª–∏ –ø—É—Å—Ç—É—é –ë–î.

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
–¶–µ–ª—å: –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥/–æ–±—Ä–∞–∑ —Ç–∞–∫, —á—Ç–æ–±—ã **–ë–î –≤ `rasp_bot_data` –Ω–µ —Ç—Ä–æ–≥–∞–ª–∞—Å—å** –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–æ–≤ –Ω–µ ‚Äú—Å–ª–µ—Ç–∞–ª–∏‚Äù.

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–µ–≥–ª–∞–º–µ–Ω—Ç (–∫–æ–ø–∏–ø–∞—Å—Ç):
```bash
# (0) –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: —Å–Ω—è—Ç—å –±—ç–∫–∞–ø –ë–î –ø–µ—Ä–µ–¥ –ª—é–±—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
chmod +x ./scripts/*.sh
./scripts/backup_db.sh

# (1) –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
git pull --ff-only

# (2) –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (volume –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ)
docker compose build --pull
docker compose up -d --remove-orphans

# (3) –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
docker compose ps
docker compose logs --tail=200 bot
docker compose exec bot python scripts/db_info.py
```

–ß—Ç–æ –Ω–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å (—Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã ‚Äú—Å—Ç–∞—Ä—Ç–æ–≤–∞–ª–∏ –Ω–∞ –ø—É—Å—Ç–æ–π –ë–î‚Äù):
- **–ù–µ–ª—å–∑—è** `docker compose down -v` / `docker compose down --volumes` ‚Äî —ç—Ç–æ —É–¥–∞–ª–∏—Ç volume `rasp_bot_data` –≤–º–µ—Å—Ç–µ —Å –ë–î.
- **–ù–µ–ª—å–∑—è** `docker volume rm rasp_bot_data` (–∏ –ª—é–±—ã–µ `prune --volumes`, –µ—Å–ª–∏ –≤—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è).
- **–ù–µ–ª—å–∑—è** –º–µ–Ω—è—Ç—å `DB_PATH` –Ω–∞ –ø—É—Ç—å –≤–Ω–µ `/app/data` (–Ω–∞–ø—Ä–∏–º–µ—Ä `sqlite+aiosqlite:///./bot.db`) ‚Äî —Ç–æ–≥–¥–∞ SQLite –æ–∫–∞–∂–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏.
- **–ù–µ–ª—å–∑—è** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bind-mount `./data:/app/data` –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Äú–ø–µ—Ä–µ–∫–∞—Ç—ã–≤–∞—Ç—å‚Äù –¥–µ–ø–ª–æ–π —É–¥–∞–ª–µ–Ω–∏–µ–º –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞.

–ú–æ–∂–Ω–æ (–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –ë–î):
- `docker compose up -d --build` (–æ–±—ã—á–Ω—ã–π in-place update).
- `docker compose down` (–±–µ–∑ `-v`) –∏–ª–∏ `docker compose stop` ‚Äî **volume –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è**.

#### –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î (–µ—Å–ª–∏ —Å–µ–π—á–∞—Å –ª–µ–∂–∏—Ç –≤ `./data`)
–°—Ü–µ–Ω–∞—Ä–∏–π: —É –≤–∞—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ—Å—Ç–∞–ª–∞—Å—å —Å—Ç–∞—Ä–∞—è –ë–î –≤ `./data/bot.db` (–∏ –≤–æ–∑–º–æ–∂–Ω–æ `bot.db-wal`/`bot.db-shm`), –∞ —Ç–µ–ø–µ—Ä—å –ë–î –¥–æ–ª–∂–Ω–∞ –∂–∏—Ç—å –≤ named volume `rasp_bot_data`.

–ö–æ–º–∞–Ω–¥—ã (–∫–æ–ø–∏–ø–∞—Å—Ç):
```bash
# 1) –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å
docker compose stop

# 2) –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ./data/bot.db –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ (–ø—Ä–∏–º–µ—Ä)
#    –í–∞–∂–Ω–æ: –µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω WAL (—É –Ω–∞—Å –≤–∫–ª—é—á—ë–Ω), –∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–∞–∫–∂–µ -wal/-shm, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å.
sudo mkdir -p /srv/rasp_bot/data
sudo cp -a ./data/bot.db* /srv/rasp_bot/data/

# 3) –í—ã—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ (–ø—Ä–∏–º–µ—Ä: —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
sudo chown -R "$USER":"$USER" /srv/rasp_bot/data
chmod 700 /srv/rasp_bot/data
chmod 600 /srv/rasp_bot/data/bot.db*

# 4) –°–¥–µ–ª–∞—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π snapshot (—É—á–∏—Ç—ã–≤–∞–µ—Ç WAL) –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ volume
python3 - <<'PY'
import sqlite3
src = "/srv/rasp_bot/data/bot.db"
dst = "/srv/rasp_bot/data/bot.db.migrated.sqlite"
s = sqlite3.connect(src)
d = sqlite3.connect(dst)
s.backup(d)
d.close()
s.close()
print(dst)
PY

chmod +x ./scripts/*.sh
./scripts/restore_db.sh /srv/rasp_bot/data/bot.db.migrated.sqlite

# 5) –ü–æ–¥–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –º–µ—Å—Ç–µ
docker compose up -d --build
docker compose logs -f
```

–ü—Ä–æ–≤–µ—Ä–∫–∞: –≤ –±–æ—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `/settings` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–≤—è–∑–∫–∞/–≤—Ä–µ–º—è —Ä–∞—Å—Å—ã–ª–∫–∏/—Ä–µ–∂–∏–º —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å.

#### –ë—ç–∫–∞–ø/restore
–°–∫—Ä–∏–ø—Ç—ã –Ω–∏–∂–µ —Å–æ–∑–¥–∞—é—Ç/–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç **–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π —Å–Ω–∞–ø—à–æ—Ç** SQLite (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å WAL, –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Ç–∞—Å–∫–∞—Ç—å `-wal/-shm`).

```bash
# –ë—ç–∫–∞–ø (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ ./backups)
chmod +x ./scripts/*.sh
./scripts/backup_db.sh

# –ë—ç–∫–∞–ø –≤ —Å–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥
./scripts/backup_db.sh /srv/rasp_bot/backups

# Restore (–ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç —Ç–µ–∫—É—â—É—é –ë–î; –ø–µ—Ä–µ–¥ —ç—Ç–∏–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç pre_restore —Å–Ω–∞–ø—à–æ—Ç –≤ ./backups)
./scripts/restore_db.sh ./backups/bot.db.20260203-153000.sqlite
```

#### Recovery –∏–∑ backup (–µ—Å–ª–∏ ‚Äú–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª–µ—Ç–µ–ª–∏‚Äù)

**–í–∞—Ä–∏–∞–Ω—Ç A (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ): –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–î –∏–∑ SQLite-—Å–Ω–∞–ø—à–æ—Ç–∞.**  
–ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–∞–π–ª –∏–∑ `./scripts/backup_db.sh`, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Äî –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:
```bash
chmod +x ./scripts/*.sh
./scripts/restore_db.sh /path/to/bot.db.YYYYmmdd-HHMMSS.sqlite
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–æ–≤ –∏–∑ JSON (export/import).**  
–ü–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –ë–î —É–∂–µ –ø—É—Å—Ç–∞—è/–Ω–æ–≤–∞—è, –Ω–æ —É –≤–∞—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç—ã `/export_settings` –¥–ª—è –Ω—É–∂–Ω—ã—Ö —á–∞—Ç–æ–≤.

–ü–æ—Ä—è–¥–æ–∫ (–ø–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞):
1. –í —Ü–µ–ª–µ–≤–æ–º —á–∞—Ç–µ (–≥—Ä—É–ø–ø–µ/–∫–∞–Ω–∞–ª–µ) –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/setup` (–∏–ª–∏ `/settings`) ‚Äî –±–æ—Ç –ø—Ä–∏–≤—è–∂–µ—Ç ‚Äú–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç‚Äù –¥–ª—è –ª–∏—á–∫–∏.
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ª–∏—á–∫—É —Å –±–æ—Ç–æ–º –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∏–º–ø–æ—Ä—Ç:
   - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/import_settings <json>` **–∏–ª–∏**
   - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ JSON –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∏ –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –Ω–µ–≥–æ –∫–æ–º–∞–Ω–¥–æ–π `/import_settings`.
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ª–∏—á–∫–µ `/status` –∏ —Å–¥–µ–ª–∞–π—Ç–µ **üß™ –¢–µ—Å—Ç** (–∏–ª–∏ –∫–æ–º–∞–Ω–¥–æ–π, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ) ‚Äî –±–æ—Ç –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ —á–∞—Ç.

–í–∞–∂–Ω–æ:
- –ò–º–ø–æ—Ä—Ç –∑–∞—â–∏—â—ë–Ω –æ—Ç –æ—à–∏–±–∫–∏ ‚Äú–Ω–µ –≤ —Ç–æ—Ç —á–∞—Ç‚Äù: `chat_id` –≤ JSON –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞—Å—Ç—å —Å —Ç–µ–∫—É—â–∏–º —á–∞—Ç–æ–º (–∏–Ω–∞—á–µ –±–æ—Ç –æ—Ç–∫–∞–∂–µ—Ç).
- –ï—Å–ª–∏ —á–∞—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω (–Ω–æ–≤—ã–π `chat_id`), —ç—Ç–æ —É–∂–µ **–Ω–æ–≤—ã–π** —á–∞—Ç: –ø—Ä–∏–¥—ë—Ç—Å—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∑–∞–Ω–æ–≤–æ, –ª–∏–±–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å `chat_id` –≤ JSON –Ω–∞ –Ω–æ–≤—ã–π –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º.

#### –ß–µ–∫-–ª–∏—Å—Ç –∑–¥–æ—Ä–æ–≤—å—è (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

–ì–¥–µ –ª–µ–∂–∏—Ç –ë–î:
- –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ: `/app/data/bot.db`
- –í Docker: named volume `rasp_bot_data` (–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å: `docker volume inspect rasp_bot_data`)

–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–∏—Å–ª–æ —á–∞—Ç–æ–≤ –≤ `settings`:
```bash
docker compose exec bot python scripts/db_info.py
```
–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–µ `settings_rows=` ‚Äî —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ (—á–∞—Ç–æ–≤) –≤ —Ç–∞–±–ª–∏—Ü–µ `settings`.

–ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –±–æ—Ç —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª –Ω–∞ –Ω–æ–≤–æ–π –ø—É—Å—Ç–æ–π –ë–î:
- `docker compose exec bot python scripts/db_info.py` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `settings_rows=0` –∏/–∏–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ –ø—É—Å—Ç—É—é —Ç–∞–±–ª–∏—Ü—É.
- –°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `exists=False` –¥–ª—è SQLite-—Ñ–∞–π–ª–∞ ‚Äî –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ volume –Ω–µ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ `DB_PATH` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ —Ç—É–¥–∞.
- –í Telegram `/settings`/`/status` –≤–Ω–µ–∑–∞–ø–Ω–æ –Ω–µ –≤–∏–¥—è—Ç –ø—Ä–∏–≤—è–∑–∫—É –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Ö–æ—Ç—è —Ä–∞–Ω—å—à–µ –±—ã–ª–∏.

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (/bind)
–ë–æ—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø–æ–π (–∏–ª–∏ –æ–¥–Ω–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º/–∫–∞–Ω–∞–ª–æ–º).
1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ —Ü–µ–ª–µ–≤—É—é –≥—Ä—É–ø–ø—É.
2. –°–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è).
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/bind` –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ.
   > –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∏–¥–µ—Ç –≤ –ª–∏—á–∫—É: "–ß–∞—Ç –ø—Ä–∏–≤—è–∑–∞–Ω: ..."

### –ö–æ–º–∞–Ω–¥—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–≤ –≥—Ä—É–ø–ø–µ)
- `/today` ‚Äî —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è.
- `/tomorrow` ‚Äî —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞.
- `/week` ‚Äî —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ç–µ–∫—É—â—É—é —É—á–µ–±–Ω—É—é –Ω–µ–¥–µ–ª—é (—Å–µ–≥–æ–¥–Ω—è ‚Üí —Å—É–±–±–æ—Ç–∞).
- `/nextweek` ‚Äî —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —É—á–µ–±–Ω—É—é –Ω–µ–¥–µ–ª—é (–ø–Ω ‚Üí —Å–±).
- `/weekbrief` (–∏–ª–∏ `/week_short`) ‚Äî –∫—Ä–∞—Ç–∫–æ –ø–æ —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–µ (2 —Å—Ç—Ä–æ–∫–∏: üü©/üüß + –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è).
- `/nextweekbrief` (–∏–ª–∏ `/nextweek_short`) ‚Äî –∫—Ä–∞—Ç–∫–æ –ø–æ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ (2 —Å—Ç—Ä–æ–∫–∏: üü©/üüß + –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è).

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (iCal)
1. –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞ –≤ –ë–î.
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –±–æ—Ç–æ–º.
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –∏–ª–∏ `/menu`.
   > –ï—Å–ª–∏ —á–∞—Ç —É–∂–µ –≤—ã–±–∏—Ä–∞–ª–∏ —Ä–∞–Ω—å—à–µ, /start –∏–ª–∏ /menu –æ—Ç–∫—Ä–æ—é—Ç –º–µ–Ω—é –±–µ–∑ —Å—Å—ã–ª–∫–∏.
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ** (–∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/upload`).
   - –ë–æ—Ç –ø–æ–¥—Ç—è–Ω–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ iCal –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ.
   - –ï—Å–ª–∏ –±—É–¥—É—Ç –æ—à–∏–±–∫–∏, –æ–Ω —Å–æ–æ–±—â–∏—Ç –æ–± —ç—Ç–æ–º (–¥–µ—Ç–∞–ª–∏ ‚Äî –≤ –ª–æ–≥–∞—Ö).
   - –ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏; –≤—ã—Å—Ç–∞–≤—å—Ç–µ `ICAL_SYNC_MIN_INTERVAL_SECONDS` > 0, —á—Ç–æ–±—ã –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0 ‚Äî –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π).

**–í–∞–∂–Ω–æ –ø—Ä–æ iCal URL (3 —Å–æ—Å—Ç–æ—è–Ω–∏—è):**
- **–ó–∞–¥–∞–Ω** (—Å—Å—ã–ª–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —á–∞—Ç–∞) ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–Ω–∞.
- **–ù–µ –∑–∞–¥–∞–Ω** (–ø—É—Å—Ç–æ) ‚Üí –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å env-–¥–µ—Ñ–æ–ª—Ç `SCHEDULE_ICAL_URL`, –µ—Å–ª–∏ `SCHEDULE_ICAL_FALLBACK_ENABLED=true`.
- **–û—Ç–∫–ª—é—á—ë–Ω** (–≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —á–∞—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ `-`) ‚Üí iCal –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ–æ–±—â–µ, –¥–∞–∂–µ –µ—Å–ª–∏ env-–¥–µ—Ñ–æ–ª—Ç –∑–∞–¥–∞–Ω.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∂–∏–º–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏ (FSM)
–í –º–µ–Ω—é –∞–¥–º–∏–Ω–∞ (–≤ –ª–∏—á–∫–µ) –Ω–∞–∂–º–∏—Ç–µ **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏**. –ë–æ—Ç step-by-step —Å–ø—Ä–æ—Å–∏—Ç:
1. **–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã**:
   - `0`: –†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞.
   - `1`: –¢–æ–ª—å–∫–æ —É—Ç—Ä–µ–Ω–Ω—è—è (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è).
   - `2`: –£—Ç—Ä–æ (–Ω–∞ —Å–µ–≥–æ–¥–Ω—è) + –í–µ—á–µ—Ä (–Ω–∞ –∑–∞–≤—Ç—Ä–∞).
2. **–í—Ä–µ–º—è —É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–∞—Å—Å—ã–ª–∫–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `07:00`).
3. **–í—Ä–µ–º—è –≤–µ—á–µ—Ä–Ω–µ–π —Ä–∞—Å—Å—ã–ª–∫–∏** (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω —Ä–µ–∂–∏–º 2, –Ω–∞–ø—Ä–∏–º–µ—Ä `19:00`).
4. **iCal/ICS URL** (–º–æ–∂–Ω–æ `-` / `default` / `skip` ‚Äî —Å–º. –ø–æ–¥—Å–∫–∞–∑–∫—É –±–æ—Ç–∞).

–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π: `Europe/Moscow`.

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∂–∏–º–æ–≤ —Ä–∞—Å—Å—ã–ª–∫–∏
- `mode=0`: –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ–º scheduled jobs –∏ –Ω–µ –¥–µ–ª–∞–µ–º catch-up –æ—Ç–ø—Ä–∞–≤–∫–∏.
- `mode=1`: —Ç–æ–ª—å–∫–æ —É—Ç—Ä–µ–Ω–Ω—è—è —Ä–∞—Å—Å—ã–ª–∫–∞ (—Å–µ–≥–æ–¥–Ω—è).
- `mode=2`: —É—Ç—Ä–µ–Ω–Ω—è—è (—Å–µ–≥–æ–¥–Ω—è) + –≤–µ—á–µ—Ä–Ω—è—è (–∑–∞–≤—Ç—Ä–∞).
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (–≤ –ª–∏—á–∫–µ) –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–≥–¥–∞: –∫–Ω–æ–ø–∫–∞ **üëÅÔ∏è –ü—Ä–µ–≤—å—é** –∏–ª–∏ –∫–æ–º–∞–Ω–¥–∞ `/preview`.
- Manual test send (–≤ —á–∞—Ç) —Ä–∞–∑—Ä–µ—à—ë–Ω –≤—Å–µ–≥–¥–∞; –∞–Ω—Ç–∏–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è kind `manual` –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç `morning`/`evening`.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
–í –º–µ–Ω—é –Ω–∞–∂–º–∏—Ç–µ **üìä –°—Ç–∞—Ç—É—Å** (–∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/status`). –í—ã —É–≤–∏–¥–∏—Ç–µ:
- –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–†–µ–∂–∏–º, –≤—Ä–µ–º–µ–Ω–∞).
- –ü—Ä–∏–≤—è–∑–∞–Ω–Ω—É—é –≥—Ä—É–ø–ø—É.
- –î–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ iCal.
- –°—Ç–∞—Ç—É—Å iCal (–∑–∞–¥–∞–Ω/–Ω–µ –∑–∞–¥–∞–Ω).
- "–ü–æ–∫—Ä—ã—Ç–∏–µ" —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–¥–æ –∫–∞–∫–æ–≥–æ —á–∏—Å–ª–∞ –µ—Å—Ç—å –∑–∞–Ω—è—Ç–∏—è).

### –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
–í –º–µ–Ω—é –Ω–∞–∂–º–∏—Ç–µ **üß™ –¢–µ—Å—Ç**. –ë–æ—Ç –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ **—Å–µ–≥–æ–¥–Ω—è** –≤ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—É—é –≥—Ä—É–ø–ø—É. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç—å.

## ‚úÖ Acceptance Criteria (–ì–∏–±—Ä–∏–¥–Ω—ã–π UX)
- –õ—é–±–æ–π —É—á–∞—Å—Ç–Ω–∏–∫ –≥—Ä—É–ø–ø—ã –ø–∏—à–µ—Ç `/setup` ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –∫–Ω–æ–ø–∫—É ‚Üí –≤ –ª–∏—á–∫–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç iCal URL + –≤—Ä–µ–º–µ–Ω–∞ + mode ‚Üí –±–æ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞—Å—Å—ã–ª–∫—É –≤ —ç—Ç—É –≥—Ä—É–ø–ø—É.
- –õ—é–±–æ–π –¥—Ä—É–≥–æ–π —É—á–∞—Å—Ç–Ω–∏–∫ —ç—Ç–æ–π –∂–µ –≥—Ä—É–ø–ø—ã –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å `/settings` ‚Üí –æ—Ç–∫—Ä—ã—Ç—å –ª–∏—á–∫—É ‚Üí –ø–æ–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –Ω–µ —Å–æ—Å—Ç–æ—è—â–∏–π –≤ –≥—Ä—É–ø–ø–µ, –Ω–µ –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ—ë —á–µ—Ä–µ–∑ –ø–æ–¥–º–µ–Ω—É payload (–ø—Ä–æ–≤–µ—Ä–∫–∞ membership).
- iCal URL –±–æ–ª—å—à–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ `.env`, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∂–∏–≤—É—Ç –≤ –ë–î –Ω–∞ `chat_id`.
- –†–µ–∂–∏–º—ã `0/1/2` –∏ –∞–Ω—Ç–∏–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ README.

## Settings backup (export/import)

–ö–æ–º–∞–Ω–¥—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤/–≤–ª–∞–¥–µ–ª—å—Ü–∞):
- `/export_settings` ‚Äî –ø—Ä–∏—Å—ã–ª–∞–µ—Ç JSON —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–∞—Ç–∞ (–≤ –ª–∏—á–∫—É).
- `/import_settings <json>` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç JSON –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –µ–≥–æ –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —á–∞—Ç—É (upsert).

–ü—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞:
- –ú–æ–∂–Ω–æ, –µ—Å–ª–∏ –≤—ã –∞–¥–º–∏–Ω —á–∞—Ç–∞ **–∏–ª–∏** –≤—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ setup-token —á–µ—Ä–µ–∑ `/setup` –¥–ª—è —ç—Ç–æ–≥–æ —á–∞—Ç–∞.
- –ë–æ—Ç —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤—ã –≤—Å—ë –µ—â—ë —É—á–∞—Å—Ç–Ω–∏–∫ —ç—Ç–æ–≥–æ —á–∞—Ç–∞.

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- iCal URL –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω. –°—á–∏—Ç–∞–π—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º.

–ü—Ä–∏–º–µ—Ä JSON:
```json
{
  "chat_id": -1001234567890,
  "timezone": "Europe/Moscow",
  "mode": 2,
  "morning_time": "07:00",
  "evening_time": "19:00",
  "ical_enabled": true,
  "ical_url": "https://example.com/calendar.ics?token=SECRET"
}
```

–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∏–º–ø–æ—Ä—Ç—É:
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å JSON —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å JSON –∫–æ–º–∞–Ω–¥–æ–π `/import_settings`.
